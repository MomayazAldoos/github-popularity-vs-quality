```{python}
import requests 
import json
import os 
```

```{python}
# Get GitHub token from environment variable for security
gitHub_token = os.getenv("GITHUB_TOKEN")
headers = {"Authorization": f"token {gitHub_token}"} if gitHub_token else {}

search_URL = "https://api.github.com/search/repositories"
params = {
    "q": "language:python ", #we will search for python repos 
    "sort": "stars",
    "order": "desc",
    "per_page": 30  #number of results per page
}

# request from Github 
response = requests.get(search_URL, headers=headers, params=params)
if response.status_code != 200:
    print("Error:", response.status_code, response.text)
    exit()
response
```

```{python}
repos = response.json().get("items", [])
print(f"Collected {len(repos)} repositories")

os.makedirs("data/raw", exist_ok=True)
with open("data/raw/repos_raw.json", "w") as f:
    json.dump(repos, f, indent=2)


```

```{python}
import pandas as pd

# Create a summary table of collected repositories
repo_data = []
for repo in repos:
    repo_data.append({
        "Repository": repo["full_name"],
        "Stars": f"{repo['stargazers_count']:,}",
        "Forks": f"{repo['forks_count']:,}",
        "Language": repo["language"],
        "Created": repo["created_at"][:10],  # Just the date part
        "Last Updated": repo["updated_at"][:10]
    })

df = pd.DataFrame(repo_data)
print("ðŸ“Š Collected Repository Dataset:")
print("="*50)
print(df.to_string(index=False))
print("\nðŸ“ˆ Summary Statistics:")
print(f"Total Repositories: {len(repos)}")
print(f"Average Stars: {sum(int(repo['stargazers_count']) for repo in repos) / len(repos):,.0f}")
print(f"Total Stars: {sum(int(repo['stargazers_count']) for repo in repos):,}")
```