```{python}
import pandas as pd
import matplotlib.pyplot as plt
df = pd.read_csv("/Users/momayazaldoos/Desktop/github-popularity-vs-quality/data/processed/repos_with_quality.csv")
df.head()

```

```{python}
# 
df[["has_readme", "has_license", "has_tests", "has_ci"]].mean()
```

```{python}
df.groupby("has_tests")["stars"].mean()
```

```{python}
plt.boxplot(
    [df[df["has_tests"] == 0]["stars"],
     df[df["has_tests"] == 1]["stars"]],
    labels=["No tests", "Has tests"]
)
plt.ylabel("Number of stars")
plt.title("GitHub stars by presence of tests")
plt.show()
```

```{python}
plt.boxplot(
    [df[df["has_readme"] == 0]["stars"],
     df[df["has_readme"] == 1]["stars"]],
    labels=["No README", "Has README"]
)
plt.ylabel("Number of stars")
plt.title("GitHub stars by presence of README")
plt.show()

```

```{python}
plt.boxplot(
    [df[df["has_license"] == 0]["stars"],
     df[df["has_license"] == 1]["stars"]],
    labels=["No license", "Has license"]
)
plt.ylabel("Number of stars")
plt.title("GitHub stars by presence of license")
plt.show()

```

```{python}
plt.boxplot(
    [df[df["has_ci"] == 0]["stars"],
     df[df["has_ci"] == 1]["stars"]],
    labels=["No CI", "Has CI"]
)
plt.ylabel("Number of stars")
plt.title("GitHub stars by CI configuration")
plt.show()

```

```{python}
df.groupby("has_ci")["stars"].describe()
```

```{python}
df.groupby("has_readme")["stars"].describe()
```


```{python}
df.groupby("has_license")["stars"].describe()
```

```{python}
df["quality_score"] = (
    df["has_readme"]
    + df["has_license"]
    + df["has_tests"]
    + df["has_ci"]
)

df[["quality_score", "stars"]].head()


plt.scatter(df["quality_score"], df["stars"])
plt.xlabel("Quality score")
plt.ylabel("Number of stars")
plt.title("GitHub stars vs quality score")
plt.show()

df[["quality_score", "stars"]].corr()

```

```{python}
df.isna().sum()


```

```{python}
df[["has_readme", "has_license", "has_tests", "has_ci"]].value_counts()

```

```{python}
df["quality_score"].describe()

```

```{python}
plt.hist(df["stars"], bins=20)
plt.xlabel("Stars")
plt.ylabel("Number of repositories")
plt.title("Distribution of GitHub stars")
plt.show()

```

```{python}
import seaborn as sns

sns.boxplot(x="quality_score", y="stars", data=df)
plt.yscale("log")
plt.xlabel("Quality Score (0-4)")
plt.ylabel("Stars")
plt.title("Distribution of GitHub Stars by Quality Score")
plt.show()

```